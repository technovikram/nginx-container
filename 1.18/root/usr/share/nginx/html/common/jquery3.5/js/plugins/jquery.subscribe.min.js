'use strict';(function(d){var b,h,k,c;window._subscribe_topics||(b={},h={});k=function(a){return a.parentWindow||a.defaultView};d.fn.extend({createTopic:function(a){a&&!b[a]&&(b[a]={},b[a].objects={},b[a].objects.__noId__=[]);return this},destroyTopic:function(a){a&&b[a]&&d.each(b[a].objects,function(e,b){d.isArray(b)?d.each(b,function(e,b){d.isFunction(b)||b.unbind(a)}):b.unbind(a)});delete b[a];return this},subscribe:function(a,e,l,f){if(this[0]&&a&&e){this.createTopic(a);if(this.attr("id"))b[a].objects[this.attr("id")]=
this;else{var g=b[a].objects.__noId__;9===this[0].nodeType&&jQuery.each(g,function(a,e){if(!d.isFunction(e)&&9===e[0].nodeType&&k(this[0]).frameElement===k(e[0]).frameElement)return this});var m=!1;for(c=0;c<g.length;c++)if(g[c]===this){m=!0;break}m||b[a].objects.__noId__.push(this)}!0!==f&&(f=this.data("events"))&&(f=f[a])&&0<f.length&&this.unbind(a);d.isFunction(e)?this.bind(a,l,e):"string"===typeof e&&d.isFunction(h[e])&&this.bind(a,l,h[e])}return this},unsubscribe:function(a){if(a){if(b[a])if(this.attr("id"))b[a].objects[this.attr("id")]&&
delete b[a].objects[this.attr("id")];else{var e=b[a].objects.__noId__;for(c=0;c<e.length;c++)if(!d.isFunction(e[c])&&e[c]===this){b[a].objects.__noId__.splice(c,1);break}}this.unbind(a)}return this},isSubscribed:function(a){if(a&&b[a])if(this.attr("id")){if(b[a].objects[this.attr("id")])return!0}else for(a=b[a].objects.__noId__,c=0;c<a.length;c++)if(!d.isFunction(a[c])&&a[c]===this)return!0;return!1},publish:function(a,e,c){if(a){this.createTopic(a);var f=function(){this.isImmediatePropagationStopped=
function(){return!0};this.isPropagationStopped=function(){return!0};this.originalEvent&&(this.originalEvent.isImmediatePropagationStopped=function(){return!0},this.originalEvent.stopPropagation=f)},g=jQuery.Event(a);d.extend(g,{originalEvent:c,stopPropagation:f});jQuery.each(b[a].objects,function(a,b){d.isArray(b)?0<b.length&&jQuery.each(b,function(a,b){d.isFunction(b)||b.trigger(g,e)}):b.trigger(g,e)})}return this},publishOnEvent:function(a,b,c){a&&b&&(this.createTopic(b),this.bind(a,c,function(a){d(this).publish(b,
a.data,a)}));return this}});d.extend({subscribe:function(a,b,c){return d(document).subscribe(a,b,c)},unsubscribe:function(a,b,c){return d(document).unsubscribe(a,b,c)},subscribeHandler:function(a,b){a&&b&&d.isFunction(b)&&(h[a]=b);return d(document)},publish:function(a,b){return d(document).publish(a,b)},createTopic:function(a){return d(document).createTopic(a)},destroyTopic:function(a){return d(document).destroyTopic(a)}})})(jQuery);